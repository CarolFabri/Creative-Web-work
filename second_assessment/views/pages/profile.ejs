<%- include('../partial/header') %>
<%- include('../partial/nav') %>
<%- include('../partial/borders') %>

      <div class="auth-hero page-login">
       <main id="loginBox" class="profile">
         <div class="profile-content">
            <h1 class="profileTitle">Welcome, <%= user.username %></h1>

            <form class="profile-input" action="/profile" method="POST">
                <label >First Name</label>
                 <input type ="text" name= "firstname" value="<%= user.firstname %>">

                  <label>Last Name</label>
                  <input type ="text" name= "lastname" value="<%= user.lastname%>">

                  <input class="button-res profile" type="submit" value="submit">
            </form>
          <section class="chat-history">
  <h2 class="profileTitle">My Chat History</h2>

  <% if (!messages || messages.length === 0) { %>
    <p>No chat history yet. Start a reading first!</p>
  <% } else { %>
    <% messages.forEach(msg => { %>
      <% if (msg.sender === "user") { %>
       <div class="history"><p><strong>You:</strong> <%= msg.text %></p></div> 
      <% } else { %>
        <div class="history"><p><strong>Fortune Teller:</strong> <%= msg.text %></p></div>
      <% } %>
    <% }) %>
  <% } %>
</section>

          </div>
        </main>
      </div>


    
     <%- include('../partial/footer') %>